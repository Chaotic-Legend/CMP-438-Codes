<?xml version="1.0"?>
<robot name="diffbot" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- Base -->
 <link name="base_link">
  <visual>
    <geometry>
      <box size="0.4 0.3 1"/>
    </geometry>
    <material name="gray">
      <color rgba="0.6 0.6 0.6 1"/>
    </material>
  </visual>
  <collision>
   <geometry>
      <box size="0.4 0.3 0.1"/>
   </geometry>
  </collision>
  <inertia>
    <mass value="5"/>
  </inertia>
 </link>

<!-- Left Wheel -->
 <link name="left_wheel">
  <visual>
   <geometry>
     <cylinder lenghth="0.05" radius="0.05"/>
   </geometry>
  </visual>
 </link>

<!-- Right Wheel -->
 <link name="right_wheel">
  <visual>
   <geometry>
     <cylinder lenghth="0.05" radius="0.05"/>
   </geometry>
  </visual>
 </link>

<!-- Wheel Joints-->
 <joint name="left_wheel_joint" type="continuous">
  <parent link="base_link"/>
  <child link="left_wheel"/>
  <origin xyz="0 0.15 0" rpy="0 1.5707 0"/>
  <axis xyz="0 1 0"/>
 </joint>

 <joint name="right_wheel_joint" type="continuous">
  <parent link="base_link"/>
  <child link="right_wheel"/>
  <origin xyz="0 -0.15 0" rpy="0 1.5707 0"/>
  <axis xyz="0 1 0"/>
 </joint>

<!-- Gazebo -->
 <gazebo>
  <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">
   <ros><namespace>/diffbot</namespace></ros>
   <update_rate>30</update_rate>
   <left_joint>left_wheel_joint</left_joint>
   <right_joint>right_wheel_joint</right_joint>
   <wheel_separation>0.3</wheel_separation>
   <wheel_diameter>0.1</wheel_diameter>
   <cmd_vel_topic>cmd_vel</cmd_vel_topic>
   <odom_topic>odom</odom_topic>
   <odom_frame>odom</odom_frame>
   <base_frame>base_link</base_frame>
  </plugin>
 </gazebo>
</robot>